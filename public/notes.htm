<!DOCTYPE html>
<html>
	<head>
		<title><%= packageFile.name %> v<%= packageFile.version %> | Speaker Notes</title>
		<link rel="stylesheet" href="js/deck.js/core/deck.core.css">
		
		<link rel="stylesheet" href="js/deck.js/extensions/navigation/deck.navigation.css" />
		<link rel="stylesheet" href="js/deck.js/extensions/status/deck.status.css" />
		<link rel="stylesheet" href="js/deck.js/extensions/scale/deck.scale.css" />

		<link rel="stylesheet" href="<%= config.presentation.theme_directory + "/" + config.presentation.theme %>/style.css" />
		
		<link rel="stylesheet" href="js/deck.js/themes/transition/fade.css" />
		
		<script src="js/deck.js/modernizr.custom.js"></script>
		<script src="/socket.io/socket.io.js"></script>
		<script>
			var socket = io.connect();
		</script>
		<link rel="Stylesheet" href="css/notes.css" />
	</head>
	<body>
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="page-header">
						<h1 class="pull-left"><%= packageFile.name %> <small>v<%= packageFile.version %></small></h1>
						<h2 class="pull-right">Presenter View</h2>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-7">		
					<div class="panel-body deck-container">
						<%| parsedSlides slide %>
							<section class="slide">
								<%= slide %>
							</section>
						<%|%>
					</div>
				</div>
				<div class="col-lg-5">
					<div class="panel panel-default">
						<div class="panel-heading"><span class="glyphicon glyphicon-search"></span> Speaker Notes</div>
						<div class="panel-body">
							<div class="speaker-notes"></div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-12"></div>
			</div>
		</div>
		<script src="js/jquery-2.0.3.min.js"></script>
		<script src="js/deck.js/core/deck.core.js"></script>
		<script src="js/deck.js/extensions/scale/deck.scale.js"></script>
		<script>
			var currentSlide = -1;
			$.deck('.slide');
			socket.on('state', function(state){
				if(state.currentSlide != currentSlide){
					currentSlide = state.currentSlide;
					$.deck('go', state.currentSlide);
					var notes = $.deck('getSlide').find("aside");
					if(notes.size()){
						var notecontent = "";
						notes.each(function(){
							notecontent += $(this).html();
						});
						$('.speaker-notes').html(notecontent).hide().fadeIn('slow');
					}
					else{
						$('.speaker-notes').show().fadeOut('slow', function(){$(this).html("<br />")});
					}
				}
				
			});
		</script>
	</body>
</html>