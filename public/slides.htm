<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=1024, user-scalable=no">

		<title><%= packageFile.name %> v<%= packageFile.version %></title>
		
		<link rel="stylesheet" href="js/deck.js/core/deck.core.css">
		
		<link rel="stylesheet" href="js/deck.js/extensions/navigation/deck.navigation.css">
		<link rel="stylesheet" href="js/deck.js/extensions/status/deck.status.css">
		<link rel="stylesheet" href="js/deck.js/extensions/scale/deck.scale.css">

		<link rel="stylesheet" href="js/deck.js/themes/style/web-2.0.css">
		
		<link rel="stylesheet" href="js/deck.js/themes/transition/fade.css">
		
		<script src="js/deck.js/modernizr.custom.js"></script>
		<script src="/socket.io/socket.io.js"></script>
	</head>
	<body class="deck-container">
		<div class="overlay" style="background-color: #000; width: 100%; height: 100%; z-index: 2000; position: absolute; margin: 0px; left: 0px; top: 0px; display: none"></div>
		<%| parsedSlides slideContent %>
			<section class="slide">
				<%= slideContent %>
			</section>
		<%|%>
		<!-- Begin extension snippets. Add or remove as needed. -->
		<p class="deck-status"><%= packageFile.name %> v<%= packageFile.version %></p>
		<!-- End extension snippets. -->


		<!-- Required JS files. -->
		<script src="js/jquery-2.0.3.min.js"></script>
		<script src="js/deck.js/core/deck.core.js"></script>

		<!-- Extension JS files. Add or remove as needed. -->
		<script src="js/deck.js/core/deck.core.js"></script>
		<script src="js/deck.js/extensions/hash/deck.hash.js"></script>
		<script src="js/deck.js/extensions/menu/deck.menu.js"></script>
		<script src="js/deck.js/extensions/goto/deck.goto.js"></script>
		<script src="js/deck.js/extensions/status/deck.status.js"></script>
		<script src="js/deck.js/extensions/navigation/deck.navigation.js"></script>
		<script src="js/deck.js/extensions/scale/deck.scale.js"></script>

		<script>
			//Initialize the deck. You can put this in an external file if desired.
			$(function() {
				$.deck.defaults.keys.next = [];
				$.deck.defaults.keys.previous = [];
				$.deck('.slide');
			});
			$(document).bind('deck.change', function(event, from, to) {
				socket.emit('slide_change', {from: from, to: to, total: $.deck('getSlides').length});
			});
			var socket = io.connect();
			var blackout = 0;
			socket.on('next_slide', function() {
				if(!blackout){
					$.deck('next');
				}
			});
			socket.on('previous_slide', function() {
				if(!blackout){
					$.deck('prev');
				}
			});
			socket.on('toggle_blackout', function(){
				$('.overlay').fadeToggle("slow");
				blackout ^= true;
			});
		</script>
	</body>
</html>